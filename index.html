<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Shooting Game with Humanoid Target</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    html, body {
      height: 100%;
      overflow: hidden;
      font-family: Arial, sans-serif;
      background: black;
      color: white;
    }
    video#bgVideo {
      position: fixed;
      top: 0; left: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      z-index: -1;
    }
    canvas {
      position: absolute;
      top: 0; left: 0;
      width: 100%; height: 100%;
      cursor: none;
    }
    #crosshair {
      position: absolute;
      width: 30px;
      height: 30px;
      pointer-events: none;
      transform: translate(-50%, -50%);
      z-index: 10;
    }
    #score, #timer {
      position: absolute;
      padding: 10px 20px;
      font-size: 22px;
      background: rgba(0,0,0,0.5);
      border-radius: 10px;
      z-index: 20;
    }
    #score { top: 10px; left: 10px; }
    #timer { top: 10px; right: 10px; }
    #startScreen {
      position: absolute;
      top: 50%; left: 50%;
      transform: translate(-50%, -50%);
      z-index: 100;
      background: rgba(0, 0, 0, 0.8);
      padding: 30px;
      border-radius: 15px;
      text-align: center;
    }
    #startScreen input {
      width: 80px;
      padding: 8px;
      margin: 10px;
      font-size: 18px;
    }
    #startScreen button {
      padding: 10px 25px;
      font-size: 18px;
      cursor: pointer;
    }
  </style>
</head>
<body>
 <video id="bgVideo" autoplay muted loop playsinline>
  <source src="https://cdn.coverr.co/videos/coverr-a-deserted-road-3776/1080p.mp4" type="video/mp4">
 </video>

  <canvas id="gameCanvas"></canvas>
  <img id="crosshair" src="https://cdn-icons-png.flaticon.com/128/4018/4018979.png" alt="Crosshair">
  <div id="score">Score: 0</div>
  <div id="timer">Time: 0</div>

  <div id="startScreen">
    <h2>Humanoid Target Shooting</h2>
    <p>Set Game Duration (seconds):</p>
    <input id="gameDuration" type="number" min="30" max="100" value="60">
    <br>
    <button onclick="startGame()">Start</button>
  </div>

  <audio id="shootSound" src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_ef60e03e77.mp3" preload="auto"></audio>
  <audio id="hitSound" src="https://cdn.pixabay.com/download/audio/2022/10/05/audio_44e7fa0c7b.mp3" preload="auto"></audio>

  <script>
    const canvas = document.getElementById("gameCanvas");
    const ctx = canvas.getContext("2d");
    const crosshair = document.getElementById("crosshair");
    const shootSound = document.getElementById("shootSound");
    const hitSound = document.getElementById("hitSound");
    const scoreDisplay = document.getElementById("score");
    const timerDisplay = document.getElementById("timer");

    let width = window.innerWidth;
    let height = window.innerHeight;
    canvas.width = width;
    canvas.height = height;

    let score = 0;
    let timeLeft = 60;
    let gameRunning = false;
    let targets = [];

    const humanoidImg = new Image();
    humanoidImg.src = "https://cdn-icons-png.flaticon.com/512/3082/3082383.png"; // Humanoid figure

    function spawnTarget() {
      const size = 120;
      const x = Math.random() * (width - size) + size / 2;
      const y = Math.random() * (height - size) + size / 2;
      targets.push({ x, y, size });
    }

    function drawTargets() {
      targets.forEach(t => {
        ctx.drawImage(humanoidImg, t.x - t.size / 2, t.y - t.size / 2, t.size, t.size);
      });
    }

    let cursorX = width / 2;
    let cursorY = height / 2;

    document.addEventListener("mousemove", e => {
      cursorX = e.clientX;
      cursorY = e.clientY;
      crosshair.style.left = cursorX + "px";
      crosshair.style.top = cursorY + "px";
    });

    document.addEventListener("touchmove", e => {
      if (e.touches.length > 0) {
        cursorX = e.touches[0].clientX;
        cursorY = e.touches[0].clientY;
        crosshair.style.left = cursorX + "px";
        crosshair.style.top = cursorY + "px";
      }
    });

    function shoot() {
      if (!gameRunning) return;
      shootSound.currentTime = 0;
      shootSound.play();

      for (let i = 0; i < targets.length; i++) {
        const t = targets[i];
        const dx = cursorX - t.x;
        const dy = cursorY - t.y;
        const distance = Math.sqrt(dx * dx + dy * dy);

        if (distance < t.size / 2) {
          const relY = cursorY - (t.y - t.size / 2);
          let points = 0;
          if (relY < t.size * 0.25) points = 10;        // Head
          else if (relY < t.size * 0.6) points = 5;      // Chest
          else points = 2;                               // Limbs

          hitSound.currentTime = 0;
          hitSound.play();
          score += points;
          scoreDisplay.innerText = "Score: " + score;
          targets.splice(i, 1);
          break;
        }
      }
    }

    document.addEventListener("click", shoot);
    document.addEventListener("touchstart", shoot);
    document.addEventListener("keydown", e => {
      if (e.code === "Space") shoot();
    });

    function gameLoop() {
      if (!gameRunning) return;
      ctx.clearRect(0, 0, width, height);
      drawTargets();

      if (Math.random() < 0.02) spawnTarget();

      requestAnimationFrame(gameLoop);
    }

    function startGame() {
      const input = document.getElementById("gameDuration").value;
      timeLeft = Math.max(30, Math.min(100, parseInt(input) || 60));
      score = 0;
      targets = [];
      document.getElementById("startScreen").style.display = "none";
      scoreDisplay.innerText = "Score: 0";
      timerDisplay.innerText = "Time: " + timeLeft;
      gameRunning = true;

      const timer = setInterval(() => {
        timeLeft--;
        timerDisplay.innerText = "Time: " + timeLeft;
        if (timeLeft <= 0) {
          clearInterval(timer);
          gameRunning = false;
          alert("Time's up! Final Score: " + score);
          document.getElementById("startScreen").style.display = "block";
        }
      }, 1000);

      gameLoop();
    }

    window.addEventListener("resize", () => {
      width = window.innerWidth;
      height = window.innerHeight;
      canvas.width = width;
      canvas.height = height;
    });
  </script>
</body>
</html>
